# 简化卫星移动通信仿真系统实验功能报告

## 1. 实验目标

本实验旨在模拟卫星移动通信系统中终端间的通信流程，研究信号的采集、处理、传输及接收的完整过程。通过该仿真实验，我们希望达到以下目标：
- **掌握信号采集、编码、调制、协议封装等发送端信号处理流程**，理解这些步骤如何影响通信的质量和效率。
- **理解卫星信号转发的基本原理及其对通信链路的影响**，包括信号的衰减、传播延迟和噪声干扰等因素。
- **熟悉接收端解调、解码、协议解析及信号恢复的过程**，确保数据能够完整无误地传输。
- **通过仿真系统分析不同调制、编码方案对通信质量的影响**，优化系统设计，提高抗干扰能力和数据传输效率。

## 2. 实验环境与工具

### 硬件设备
- 计算机工作站

### 软件工具
- NS3（网络仿真器）

- Wireshark（协议分析）
- **Python + PyQt**（用于仿真系统GUI设计）

## 3. 逻辑设计

### 3.1 发送端（终端A）

1. **信号采集**
   - **功能描述**：终端A需要获取待发送的信号，这些信号可能来自于传感器（如温度传感器、加速度传感器等）或者麦克风（用于采集声音信号），也可以是其他形式的数据流。
   - **实现方法**：可以通过数字信号处理系统（DSP）对采集到的模拟信号进行滤波和降噪处理，确保信号质量在较高的标准下进行传输。常用的预处理技术包括：
     - **低通滤波**：去除高频噪声。
     - **降噪技术**：通过平均法、卡尔曼滤波等方法去除背景噪声。
     - **增益控制**：调整信号幅度，避免信号过弱或过强。
   - **影响因素**：采集过程的噪声、采样设备的质量等。

2. **模数转换（AD转换）**
   - **功能描述**：模拟信号需转化为数字信号以便进一步处理和传输。
   - **实现方法**：选择合适的采样率进行采样。例如，语音信号通常使用8kHz的采样率，而音乐或高质量音频可能使用44.1kHz或更高的采样率。同时，为了保证信号质量，需要使用足够的量化位数（如16位、24位）来减少量化误差。
   - **影响因素**：采样率、量化精度以及采样时刻的选择都可能影响最终的信号质量。采样率过低会导致信息丢失，而量化精度不足会产生较大的量化噪声。

3. **数字信号编码**
   - **功能描述**：通过信道编码技术对采集到的数字信号进行编码，目的是为了提高数据传输的可靠性和抗干扰能力。
   - **实现方法**：常用的信道编码技术有Turbo码、卷积码等，它们通过冗余的方式在信号中添加校验信息，从而使接收端能够纠正传输过程中可能产生的误差。
   - **影响因素**：编码的选择对系统的性能至关重要。例如，Turbo码能够提供较好的纠错能力，但会增加计算复杂度。编码的选择要在可靠性和计算开销之间找到平衡。

4. **协议封装**
   - **功能描述**：编码后的数据需要进行协议封装，确保数据可以正确地在网络中传输并提供必要的元数据（如源地址、目标地址、校验信息等）。
   - **实现方法**：采用特定的协议（如TCP/IP、UDP）进行封装。在协议头中包含关键信息，如数据包的源地址、目标地址、时间戳、校验码等。这些信息对后续的协议解析和数据验证非常重要。
   - **影响因素**：封装格式的选择会直接影响数据传输的效率及其可扩展性。数据包的头部信息过大或不符合网络规范会导致效率低下。

5. **信号调制**
   - **功能描述**：数字信号需要调制成适合传输的模拟信号，便于通过无线电波进行传输。
   - **实现方法**：常见的调制方式包括BPSK（Binary Phase Shift Keying）、QPSK（Quadrature Phase Shift Keying）和更复杂的16QAM（16 Quadrature Amplitude Modulation）等。调制过程将数字信息映射到连续的信号波形上，使其适应无线信道。
   - **影响因素**：调制方式的选择影响数据的传输速率和抗干扰能力。BPSK和QPSK具有较好的抗噪声性能，而16QAM等复杂调制方式则可以提供更高的传输速率，但对信噪比要求较高。

6. **信号发送**
   - **功能描述**：调制后的信号通过上行链路发送至卫星，进行中继转发。
   - **实现方法**：通过合适的天线和传输设备（如功率放大器）将调制信号发送到卫星。此时，天线的参数（如增益、方向性等）对信号的传输质量有重要影响。
   - **影响因素**：上行链路的信号衰减、传输距离、天气条件等都会影响信号的传输质量。采用高增益天线和足够的发射功率可降低信号衰减。

### 3.2 卫星转发

1. **信号接收**
   - **功能描述**：卫星接收来自终端A的信号，并进行必要的处理。
   - **实现方法**：卫星的接收系统需要对信号进行放大、滤波等处理，以确保信号能够被清晰地转发。接收后的信号可能受到多普勒效应、信号衰减等影响，因此需要进行适当的补偿。
   - **影响因素**：信号的衰减、噪声、以及卫星位置与信号强度的关系等。

2. **信号转发**
   - **功能描述**：卫星将接收到的信号转发至终端B，传输过程中可能需要重新调制或调整频率。
   - **实现方法**：卫星会通过下行链路将信号转发至地面站或终端B。此时，卫星需对信号进行适当的处理，如放大、调频等，以确保信号在下行链路中不丢失。
   - **影响因素**：信号在卫星转发过程中可能会受到衰减、噪声、时延等因素的影响，因此转发时需要通过放大和信号处理技术来确保信号的可靠性。

### 3.3 接收端（终端B）

1. **信号接收**
   - **功能描述**：终端B通过下行链路接收卫星转发的信号，并分析接收到的信号质量（如信噪比）。
   - **实现方法**：接收端使用合适的接收天线和接收设备，解调接收到的信号。接收后的信号可能因信道噪声、干扰等原因发生失真，接收端需要进行必要的错误校正。
   - **影响因素**：接收端的天线增益、频率选择和接收灵敏度直接影响信号的接收质量。

2. **信号解调**
   - **功能描述**：将接收到的模拟信号恢复为数字信号。
   - **实现方法**：常用的解调技术包括匹配滤波器解调和相干解调技术。解调过程的目的是恢复信号的原始数字信息。
   - **影响因素**：解调过程的准确性依赖于信号的质量和接收的信噪比。信号的畸变和噪声会导致解调错误。

3. **协议解析**
   - **功能描述**：提取数据包中的协议头信息，如源地址、目标地址、时间戳等，以确保数据的正确性。
   - **实现方法**：接收端首先会解析接收到的数据包的头部，验证数据包的完整性、有效性，并检查任何潜在的传输错误。
   - **影响因素**：协议解析的准确性与数据包格式的规范性和数据完整性相关。任何不一致的协议格式都可能导致解析错误。

4. **数字信号解码**
   - **功能描述**：对数字信号进行解码，以恢复原始数据。
   - **实现方法**：采用与发送端相同的解码技术（如Turbo码、卷积码等），通过纠错算法恢复信号。解码后，接收端可以得到原始的发送数据。
   - **影响因素**：解码的性能直接受到信号质量和解码算法的影响。较差的信号质量会增加解码误差。

5. **数模转换（DA转换）**
   - **功能描述**：将数字信号恢复为模拟信号，供终端B使用（如播放音频）。
   - **实现方法**：使用数模转换器（DAC）将数字信号转换为模拟信号，供接收设备（如扬声器）输出。
   - **影响因素**：DAC的精度和转换速度影响最终的信号质量。数模转换后，恢复信号的保真度会直接影响接收端用户的体验。


## 4.流程图
![img_1.png](docs/img_1.png)
## 5. PyQt GUI 设计与实现

1. **GUI 主要功能**
   - 提供可视化的终端A、卫星转发、终端B的工作流程。
   - 实时显示信号波形、误码率分析。
   - 允许用户自定义调制方式、信道条件等。
![earth.jpg](docs/earth.jpg)
2. **可扩展性**
   - 进一步完善GUI，加入实时信号显示（如OpenGl嵌入）。
   - 连接仿真模块，实现完整的数据流动。
3. 结果展示与数据可视化
    - **误码率与信噪比关系图**：绘制不同天线配置下的误码率（BER）曲线，展示随着信噪比（SNR）变化的系统性能。
    - **系统容量分析图**：展示不同用户数量下，系统容量如何变化，能够直观地展示系统的容量扩展性。
    - **动态链路可视化**：通过图表和动画形式，展示卫星轨道与地面站的动态调整过程、链路质量等信息。
    - **GUI界面优化**：进一步完善PyQt的用户界面，使其支持实时数据图表显示与交互操作，让用户更直观地进行仿真和结果分析。
## 6.1 多输入多输出（MIMO）技术简介与意义

在现代无线通信系统中，为了进一步提升数据传输速率和系统容量，引入了多输入多输出（MIMO, Multiple-Input Multiple-Output）技术。MIMO 通过在发送端和接收端配置多个天线，实现信道的空间复用和空间分集。

### 6.1.1 MIMO 的基本原理

MIMO 技术通过多个发射天线同时发送不同的数据流，并利用多个接收天线接收信号，在相同频率资源下实现更高的数据吞吐量。

设发送端有 $N_t$ 个天线，接收端有 $N_r$ 个天线，系统模型可描述为：

$$
\mathbf{y} = \mathbf{H} \mathbf{x} + \mathbf{n}
$$

- $\mathbf{y}$：接收信号向量（$N_r \times 1$）
- $\mathbf{H}$：信道矩阵（$N_r \times N_t$）
- $\mathbf{x}$：发送信号向量（$N_t \times 1$）
- $\mathbf{n}$：接收噪声（$N_r \times 1$）

### 6.1.2 MIMO 的优势

- **系统容量提升**：MIMO 能够在同一带宽和功率下成倍提高通信速率。
- **抗多径衰落能力增强**：通过空间分集获得更鲁棒的链路。
- **频谱效率提升**：频谱利用率显著高于传统单天线系统。
- ### 6.2 GUI 控件设计

在 PyQt GUI 中设计以下功能控件：

- **天线配置选择框**：
  - 下拉菜单供用户选择天线数量（1x1、2x2、4x4）。
- **SNR 调节滑块**：
  - 用于设置仿真中的信噪比（Signal-to-Noise Ratio）。
- **解码算法切换选项**：
  - 单选按钮用于切换解码方式：ZF（零强迫）或 MMSE（最小均方误差）。
- **误码率曲线显示区**：
  - 实时绘制 BER（Bit Error Rate）随 SNR 和天线数量变化的曲线。

# 7. 卫星通信在实际环境中的建模

将实验从理论模型拓展到实际应用时，考虑卫星轨道仿真和地面站的动态调整至关重要。不同轨道类型（低轨卫星LEO、中轨卫星MEO和静止轨道卫星GEO）具有不同的通信特点，下面将介绍如何在仿真中加入这些因素。

## 1. 卫星轨道的分类与特点

### 1.1 低轨卫星（LEO）
- **高度**：500 km - 2000 km
- **特点**：低延迟（30-50毫秒），覆盖范围小，需部署大量卫星，易受大气干扰。

### 1.2 中轨卫星（MEO）
- **高度**：5000 km - 20000 km
- **特点**：适中延迟（<150毫秒），覆盖范围广，适合中继和数据传输。

### 1.3 静止轨道卫星（GEO）
- **高度**：35786 km
- **特点**：较高延迟（>240毫秒），固定视场，覆盖大区域，适用于全球通信。

## 2. 卫星轨道仿真

### 2.1 轨道仿真步骤
1. **选择轨道类型**：基于卫星类型选择合适轨道高度。
2. **计算轨道周期**：使用开普勒定律计算卫星运动轨迹。
3. **卫星位置与地面站**：动态计算卫星与地面站之间的相对位置。
4. **视距与信号链路**：计算卫星与地面站的信号传输路径和衰减。

### 2.2 动态调整与切换
- **低轨卫星的跟踪**：地面站需快速调整天线方向，确保始终对准卫星。
- **卫星切换**：当低轨卫星离开视野时，自动切换至其他卫星，确保通信链路持续稳定。

## 3. 卫星地面站的动态调整

### 3.1 动态天线跟踪
- 通过自动天线跟踪系统调整天线方向，确保与卫星对准。
- 使用电子扫描阵列（ESA）技术提高天线跟踪精度。

### 3.2 卫星地面站调度
- **低轨卫星**：快速切换至新卫星以确保通信不中断。
- **静止轨道卫星**：地面站通信链路稳定，适合提供长期稳定的服务。

## 4. 实验中的应用
- **信号衰减与延迟**：模拟不同轨道卫星通信链路的信号衰减、延迟等影响。
- **多普勒效应**：考虑低轨卫星的多普勒效应对信号频率的影响。
- **误码率（BER）**：分析不同轨道卫星下的误码率变化，优化通信系统设计。

通过这些优化，可以更真实地模拟卫星通信的实际场景，提高系统的可靠性和效率。

## 8. 可能遇到的问题及解决方案

1. **信号衰落问题**：采用均衡技术提高接收信号质量。
2. **误码率较高**：优化编码方式，如LDPC编码。
3. **多普勒效应影响**：采用自适应调制技术进行补偿。
4. **GUI 响应速度慢**：采用多线程优化PyQt响应速度。

## 9. 结论与改进方向

1. **优化编码调制方案**
   - 采用联合编码调制技术提高系统的抗干扰能力。


2. **优化信道建模**
   - 引入更真实的卫星信道模型，提高仿真精度。

## 8. 参考文献
[1] Proakis, J. G. Digital Communications. McGraw-Hill, 2008.  
[2] Sklar, B. Digital Communications: Fundamentals and Applications. Prentice Hall, 2001.
